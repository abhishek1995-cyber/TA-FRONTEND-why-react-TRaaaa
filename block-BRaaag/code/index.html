<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <header>
        <h1>
            Movie Watch List
        </h1>
    </header>
    <main>
        <div>
            <input type="text" placeholder="Enter The Movie Name">
            <ul class="movie-list">
            </ul>
        </div>
    </main>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script type="text/babel">
     let input = document.querySelector(`input[type='text']`);
    let rootelm = document.querySelector('.movie-list');
    
    let allmovies = [];
    
    
    input.addEventListener('keyup',(event)=>{
        if(event.keyCode === 13){
            allmovies.push({
                name: event.target.value,
                watched: false,
            });
            event.target.value = '';
            cretaMovieUi()
        }
    })
    
    // function elm(type, attr = {}, ...children){
    //     let element = document.createElement(type);
    //     for(let key in attr){
    //         if(key.startsWith("data-")){
    //             element.setAttribute(key,attr[key]);
    //         } else {
    //         element[key] = attr[key]
    //         }
    //     }
    //     children.forEach((child) =>{
    //         if(typeof child === 'object'){
    //             element.append(child)
    //         }  if (typeof child === 'string'){
    //             let node = document.createTextNode(child);
    //             element.append(node)
    //         }
    //     })
    //     return element
    // }
    
    
    function handleChange(event) {
        let id = event.target.id;
        allmovies[id].watched = !allmovies[id].watched;
        cretaMovieUi();
    }
    
    
    function cretaMovieUi(){
       let movieUI = allmovies.map((movie,i) =>{
            // let li = React.createElement('li',
            // {className: 'flex'}, 
            // React.createElement('input',{type:"checkbox",
            // checked: movie.watched,
            // "data-id": i, 
            // }),
            // React.createElement('h2',{}, movie.name),
            // React.createElement('button',{
            //     "data-id" : i ,
            // onClick: handleChange 
            // },
            // movie.watched ? 'watched' : 'To watch'
            // ),
            // );
           return (<li>
            <input type="checkbox" checked = {movie.watched} data-id = {i}/>
            <p>{movie.name}</p>
            <button id = {i} onClick = {handleChange}>
                {movie.watched ? 'watched' : 'To watch'}
                </button>
            </li>
           )
        })
        ReactDOM.render(movieUI,rootelm)
    }
    
    cretaMovieUi()
    </script>
</body>
</html>